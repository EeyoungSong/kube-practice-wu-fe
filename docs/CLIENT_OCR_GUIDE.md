# 클라이언트 사이드 OCR 가이드

## 개요

이 프로젝트에서는 이제 두 가지 OCR 방식을 지원합니다:

1. **클라이언트 사이드 OCR** (Tesseract.js) - 기본값
2. **서버 사이드 OCR** (기존 API)

## 클라이언트 사이드 OCR의 장점

### ✅ 장점

- **프라이버시 보호**: 이미지가 서버로 전송되지 않음
- **서버 부하 없음**: 브라우저에서 직접 처리
- **오프라인 지원**: 인터넷 연결 없이도 동작 가능
- **비용 절약**: 서버 리소스 사용 없음

### ⚠️ 단점

- **초기 로딩 시간**: 언어 모델 다운로드 필요 (최초 1회)
- **정확도**: 서버 기반 솔루션보다 낮을 수 있음
- **성능 의존**: 사용자 디바이스 성능에 따라 처리 속도 차이

## 사용 방법

### 1. OCR 방식 선택

- 이미지 업로드 섹션에서 "클라이언트 OCR 사용" 토글을 조정
- 기본값: 클라이언트 OCR 활성화

### 2. 지원 언어

현재 지원되는 언어:

- 영어 (eng)
- 한국어 (kor)
- 일본어 (jpn)
- 중국어 간체 (chi_sim)
- 중국어 번체 (chi_tra)
- 프랑스어 (fra)
- 독일어 (deu)
- 스페인어 (spa)
- 러시아어 (rus)

### 3. 진행상황 표시

클라이언트 OCR 사용 시 다음 정보가 표시됩니다:

- 현재 처리 단계
- 진행률 (%)
- 처리 방식 (브라우저/서버)

## 기술적 세부사항

### 사용된 라이브러리

- **Tesseract.js**: 클라이언트 사이드 OCR 엔진
- **Web Workers**: 메인 스레드 블로킹 방지

### 언어 모델 로딩

- 최초 사용 시 해당 언어 모델이 자동 다운로드됩니다
- 모델은 브라우저 캐시에 저장되어 재사용됩니다
- 언어 조합 예: 'eng+kor' (영어+한국어 동시 인식)

### 성능 최적화

- 워커 재사용으로 초기화 시간 단축
- 컴포넌트 언마운트 시 자동 정리
- 진행상황 실시간 업데이트

## 문제 해결

### 1. OCR 정확도가 낮은 경우

- 이미지 품질을 높여보세요 (해상도, 대비)
- 서버 OCR로 전환해보세요
- 텍스트가 명확하게 보이는 이미지를 사용하세요

### 2. 처리 속도가 느린 경우

- 이미지 크기를 줄여보세요
- 브라우저를 재시작해보세요
- 서버 OCR로 전환해보세요

### 3. 언어 인식 문제

- 올바른 언어가 선택되었는지 확인하세요
- 혼합 언어의 경우 'eng+kor' 같은 조합을 사용합니다

## 개발자 정보

### 서비스 파일 위치

- `services/ocr.service.ts`: 클라이언트 OCR 서비스
- `app/add/page.tsx`: OCR 사용 컴포넌트

### 주요 메서드

```typescript
// OCR 서비스 초기화
await ocrService.initialize("eng+kor");

// 텍스트 추출
const result = await ocrService.extractText(file, onProgress);

// 서비스 정리
await ocrService.terminate();
```

### 커스터마이징

언어 매핑이나 OCR 설정을 변경하려면 `getOCRLanguage` 함수를 수정하세요.
